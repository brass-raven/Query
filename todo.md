# Query - PostgreSQL Desktop Client

A modern, fast PostgreSQL client built with Tauri 2.0, React 19, and TypeScript.

## Core Features (Completed)
- [x] query history
- [x] intellisense
- [x] autocomplete
- [x] double click to run query
- [x] double click on a table to select * from table (already works as single click with limit 100)
- [x] quickly change between connections (dropdown in header + Cmd+Shift+C)
- [x] save & pin queries
- [x] hot query (command + k)
  - Quick commands: SELECT, INSERT, UPDATE, DELETE, DESCRIBE, COUNT for any table
  - Fuzzy search for tables
  - Shows recent queries from history
- [x] vim keybindings (toggleable with VIM button)
- [x] tanstack table (with sorting, filtering, virtual scrolling)
- [x] quick preview of query results (compact/expand toggle)
- [x] store data in a specific location (project directory picker)
- [x] save encrypted data locally (OS keychain for passwords)
- [x] open a project (select directory to store connections/history/queries)
- [x] restructure app
  - move components to their own folder
  - move styles to their own folder
  - move functions to their own folder
  - move types to their own folder
  - move constants to their own folder
- [x] speed (when having a lot of lines, the app is slow, need to optimize and lazy load the results)
- [x] export/import (CSV and JSON)
- [x] show vim mode in ui (already implemented but cannot see)
- [x] settings page with Cmd+, shortcut (4 tabs: General, Editor, Display, Connections)
- [x] update command palette to use shadcn Command component
- [x] read only mode implementation with backend enforcement (only SELECT, DESCRIBE, DESC, SHOW, EXPLAIN)
- [x] manage connections in settings (create, edit, delete)
- [x] connection URL parser (paste postgres://user:pass@host:port/db to auto-fill)
- [x] test connection button on connection form
- [x] enhanced cmd+k with ALL commands (SELECT, INSERT, UPDATE, DELETE, DESCRIBE, COUNT per table)
- [x] modern app layout with AppNew.tsx (resizable panels, shadcn sidebar)
- [x] layout direction toggle (vertical/horizontal split)
- [x] styling improvements:
  - [x] sidebar toggle button in header
  - [x] connection dropdown with "+" for new connection
  - [x] read-only mode indicator in header
  - [x] layout direction toggle button
  - [x] CMD+K button in header
- [x] make table area horizontally scrollable
- [x] remove height constraints from results table (takes up all available space)
- [x] global search across all columns in results
- [x] full-screen results mode with keyboard shortcut (Cmd+Shift+F)
- [x] improved editor styling (custom Monaco theme matching app colors)

- [x] multi-row selection & manipulation
  - [x] Checkbox column for row selection
  - [x] Select all/none functionality
  - [x] Selection count display
  - [x] Copy selected rows to clipboard (CSV/JSON)
  - [x] Visual feedback for selected rows
  - [x] Keyboard shortcuts (Escape to clear)
- [x] inline data editing
  - [x] Edit mode toggle with visual indicator
  - [x] Double-click cells to edit values
  - [x] Dirty data tracking with visual feedback (blue border)
  - [x] Save Changes button (appears when dirty data exists)
  - [x] Generate UPDATE SQL using primary keys
  - [x] Execute updates and re-fetch results
  - [x] Read-only mode enforcement
  - [x] Primary key validation (editing disabled without PK)
- [x] snippet-style tabbing for query templates
  - [x] Fixed insertSnippet to use Monaco's native snippet controller
  - [x] Tab navigation between placeholders (${1:text}, ${2:text}, etc.)
  - [x] Added 8 SQL snippet templates in autocomplete (sel, selj, sellj, selagg, ins, upd, del, cte)
  - [x] Snippets work with existing INSERT/UPDATE/DELETE from sidebar
  - [x] Configured editor for optimal snippet support
- [x] better git integration (commit, push, pull in app)
  - [x] Live git status in sidebar footer (branch name, change count)
  - [x] Interactive buttons for Commit, Push, Pull operations
  - [x] Initialize Repository button when not a git repo
  - [x] GitCommitModal for committing with message and file list
  - [x] Commit message input with Cmd+Enter shortcut
  - [x] Auto-polling git status every 10 seconds
  - [x] Error handling for non-git repositories
  - [x] Shell-based git commands (no additional dependencies)
  - [x] Backend Rust commands: check_git_repo, get_git_status, get_git_log, git_init, git_commit, git_push, git_pull
- [x] header in native macOS title bar (next to traffic lights)
- [x] improved editor styling (better integration with overall design)
- [x] make ui more compact 
  - (moving things into the same rows: results row, edit row on another line, selected meta data on another row, but this could all be moved into one row.)
  - 3 instances of same thing: # rows & time to execute query
- [x] ERD (entity relationship diagram)
- [x] ability in top menu to open the current project directory
- [x] show recent projects in project selector dropdown (a project is a directory)
- [x] schema comparison (dev, staging, prod)
  - [x] Enhanced schema fetching (tables, columns, indexes, foreign keys, views, routines)
  - [x] Full comparison logic with diff detection
  - [x] Migration SQL script generation
  - [x] UI with summary, table details, warnings, and script viewer
  - [x] GitCompareArrows button in header to open comparison modal
- [x] remove unused files (verified App.css is in use, codebase is clean)
- [x] remove random "invoke" calls and have a centralized area for all tauri calls (all centralized in utils/tauri.ts)
- [x] remove magic vars (moved to constants/ui.ts and constants/sql.ts)
- [x] app pages should have space above them (sidebar and compare page)
- [x] paste functionality (added Edit menu with clipboard shortcuts)
- [x] ERD should have column (custom TableNode with expandable columns - shows 10 by default, click to expand all)
- [x] sidebar should be resizable
- [x] store vim mode in .query settings
- [x] cmd+k should show saved queries
- [x] cmd+k should have better query abilities, for example, when i say select user i should be able to say "where ..." and there should be autocomplete for the columns
- [x] db url parse not allowing to paste in.

### Priority Features
- [ ] remove all the damn use states. need to refactor the AppNew file.

### Future Features
- [ ] robust table manipulation (create, alter, drop tables from UI)
- [ ] variables system, e.g. ${1:text} in the query editor then have a variable editor to edit them.
- [ ] other database types:
  - mysql
  - mongodb (nosql)
### Low Priority
- [ ] cancel query (abort long-running queries)
- [ ] break out large files to separate files
- [ ] general refactoring and cleanup
- [ ] github action workflow for building and publishing
- [ ] better git integration: view the diffs.
- [ ] address all build errors & warnings.

---
